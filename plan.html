<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Blueprint de Fitness Interactivo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Lora:wght@700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F5F5F4; /* stone-100 */
            color: #3f3f46; /* stone-700 */
        }
        h1, h2, h3, h4, h5 {
             font-family: 'Lora', serif;
        }
        .tab-active {
            border-color: #c5a265; /* Bruma Gold */
            color: #2c3144; /* Deep Charcoal */
            background-color: rgba(197, 162, 101, 0.1);
        }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }
        .calendar-day { min-height: 100px; }
        .calendar-day-header {
            font-size: 0.75rem;
            text-align: center;
            padding: 4px 0;
            background-color: #F5F5F4;
            font-family: 'Inter', sans-serif;
        }
        .today {
            border: 2px solid #c5a265; /* Bruma Gold */
            box-shadow: 0 0 8px rgba(197, 162, 101, 0.5);
        }
        .progress-bar-container {
            background-color: #e5e7eb; /* cool-gray-200 */
            border-radius: 9999px;
            height: 1.25rem;
            width: 100%;
            overflow: hidden;
            border: 1px solid #d4d4d8;
        }
        .progress-bar {
            background-color: #c5a265; /* Bruma Gold */
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
        }
        /* Estilos para el Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 50;
        }
        .modal-content {
            background-color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            max-width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            width: 60rem;
        }
        .img-placeholder {
            background-color: #f3f4f6;
            border: 2px dashed #d1d5db;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
            min-height: 200px;
            text-align: center;
            padding: 1rem;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto max-w-5xl p-4 sm:p-6">
        
        <header class="text-center mb-6">
            <h1 class="text-3xl sm:text-4xl font-bold text-stone-900">Mi Blueprint de Fitness</h1>
            <p class="text-stone-600 mt-2">Tu plan de entrenamiento avanzado, fusionado e interactivo.</p>
        </header>

        <div class="mb-8 p-4 bg-white rounded-lg shadow-md border border-stone-200">
            <h2 class="text-center text-xl font-bold text-stone-800 mb-3">Progreso Mensual General</h2>
            <div id="global-progress-text" class="text-center font-bold text-lg mb-2 text-[#5a6e5f]">0%</div>
            <div class="progress-bar-container">
                <div id="global-progress-bar" class="progress-bar"></div>
            </div>
        </div>

        <nav class="flex justify-center border-b border-stone-200 mb-8">
            <div class="flex flex-wrap justify-center -mb-px">
                <button data-tab="hoy" class="nav-tab text-md sm:text-lg py-3 px-3 sm:px-6 font-semibold border-b-2 border-transparent hover:text-[#b38e52] transition-colors duration-200">üóìÔ∏è Hoy</button>
                <button data-tab="calendario" class="nav-tab text-md sm:text-lg py-3 px-3 sm:px-6 font-semibold border-b-2 border-transparent hover:text-[#b38e52] transition-colors duration-200">üìÖ Calendario</button>
                <button data-tab="rutinas" class="nav-tab text-md sm:text-lg py-3 px-3 sm:px-6 font-semibold border-b-2 border-transparent hover:text-[#b38e52] transition-colors duration-200">üèãÔ∏è‚Äç‚ôÇÔ∏è Rutinas</button>
                <button data-tab="yoga" class="nav-tab text-md sm:text-lg py-3 px-3 sm:px-6 font-semibold border-b-2 border-transparent hover:text-[#b38e52] transition-colors duration-200">üßò‚Äç‚ôÇÔ∏è Yoga</button>
            </div>
        </nav>

        <main id="main-content">
            <section id="hoy" class="content-section"></section>
            <section id="calendario" class="content-section">
                 <div class="bg-white p-4 sm:p-6 rounded-lg shadow-md border border-stone-200">
                    <div class="text-center mb-6">
                        <h2 id="calendar-title" class="text-2xl font-bold"></h2>
                        <p class="text-stone-600 mt-1">Un vistazo completo a tu mes de entrenamiento.</p>
                    </div>
                    <div class="calendar-grid font-semibold text-stone-600">
                        <div class="calendar-day-header">Lunes</div>
                        <div class="calendar-day-header">Martes</div>
                        <div class="calendar-day-header">Mi√©rcoles</div>
                        <div class="calendar-day-header">Jueves</div>
                        <div class="calendar-day-header">Viernes</div>
                        <div class="calendar-day-header">S√°bado</div>
                        <div class="calendar-day-header">Domingo</div>
                    </div>
                    <div id="calendar-body" class="calendar-grid"></div>
                </div>
            </section>
            <section id="rutinas" class="content-section">
                <div class="mb-6 text-center">
                    <p class="text-stone-600">Aqu√≠ puedes consultar los detalles de cada rutina. Selecciona una para ver los ejercicios.</p>
                </div>
                <div class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-8">
                    <button data-routine="TORSO_PUSH" class="routine-selector bg-white hover:bg-stone-50 text-[#5a6e5f] font-semibold py-2 px-4 border border-stone-200 rounded-lg shadow-sm transition-all duration-200">üí™ Torso Empuje</button>
                    <button data-routine="LEGS_ANKLES" class="routine-selector bg-white hover:bg-stone-50 text-[#5a6e5f] font-semibold py-2 px-4 border border-stone-200 rounded-lg shadow-sm transition-all duration-200">ü¶µ Pierna y Tobillos</button>
                    <button data-routine="TORSO_PULL" class="routine-selector bg-white hover:bg-stone-50 text-[#5a6e5f] font-semibold py-2 px-4 border border-stone-200 rounded-lg shadow-sm transition-all duration-200">üèãÔ∏è‚Äç‚ôÇÔ∏è Torso Tracci√≥n</button>
                    <button data-routine="GLUTES_CORE" class="routine-selector bg-white hover:bg-stone-50 text-[#5a6e5f] font-semibold py-2 px-4 border border-stone-200 rounded-lg shadow-sm transition-all duration-200">üçë Gl√∫teos y Core</button>
                    <button data-routine="METABOLIC" class="routine-selector bg-white hover:bg-stone-50 text-[#5a6e5f] font-semibold py-2 px-4 border border-stone-200 rounded-lg shadow-sm transition-all duration-200">‚ö° Metab√≥lico</button>
                </div>
                <div id="routine-details-container"></div>
            </section>
            <section id="yoga" class="content-section space-y-4">
                 <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold">Yoga para Recuperaci√≥n</h2>
                    <p class="text-stone-600 mt-1">Posturas para complementar tu entrenamiento, mejorar la flexibilidad y acelerar la recuperaci√≥n.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-sm border border-stone-200">
                    <button class="accordion-toggle flex justify-between items-center w-full text-left text-xl font-semibold">
                        <span>üßò‚Äç‚ôÄÔ∏è Post-Empuje (Pecho, Hombros, Tr√≠ceps)</span>
                        <span class="transform transition-transform duration-300">‚ñº</span>
                    </button>
                    <div class="accordion-content pt-2">
                        <ul class="list-disc list-inside space-y-3 text-stone-700">
                            <li><strong>Postura del Cachorro (Uttana Shishosana):</strong> Arrod√≠llate y camina las manos hacia adelante, bajando el pecho al suelo. Estira los hombros y el pecho. Mant√©n por 30-60 segundos.</li>
                            <li><strong>Brazos de Cara de Vaca (Gomukhasana):</strong> Levanta un brazo, d√≥blalo para que tu mano toque la espalda. Lleva el otro brazo por debajo y trata de unir las manos. Estira tr√≠ceps y hombros. Mant√©n 30 seg por lado.</li>
                            <li><strong>Estiramiento de Pecho en la Pared:</strong> Coloca el antebrazo en una pared, formando un √°ngulo de 90 grados. Gira tu cuerpo suavemente en direcci√≥n opuesta para un estiramiento profundo del pectoral. Mant√©n 30 seg por lado.</li>
                        </ul>
                    </div>
                </div>
                 <div class="bg-white p-4 rounded-lg shadow-sm border border-stone-200">
                    <button class="accordion-toggle flex justify-between items-center w-full text-left text-xl font-semibold">
                        <span>üßò‚Äç‚ôÇÔ∏è Post-Tir√≥n (Espalda, B√≠ceps)</span>
                        <span class="transform transition-transform duration-300">‚ñº</span>
                    </button>
                    <div class="accordion-content pt-2">
                         <ul class="list-disc list-inside space-y-3 text-stone-700">
                            <li><strong>Gato-Vaca (Marjaryasana-Bitilasana):</strong> A cuatro patas, inhala para arquear la espalda (Vaca) y exhala para redondearla (Gato). Moviliza y relaja toda la columna. Realiza 10-15 repeticiones lentas.</li>
                            <li><strong>Torsi√≥n Espinal Supina (Supta Matsyendrasana):</strong> Acostado, lleva una rodilla al pecho y luego cr√∫zala sobre tu cuerpo, extendiendo el brazo opuesto. Relaja la espalda y el pecho. Mant√©n 30-60 seg por lado.</li>
                            <li><strong>Estiramiento de B√≠ceps en la Pared:</strong> De pie, extiende un brazo y coloca la palma en la pared. Gira tu cuerpo lentamente en direcci√≥n opuesta hasta sentir un estiramiento en el b√≠ceps y el hombro. Mant√©n 30 seg por lado.</li>
                        </ul>
                    </div>
                </div>
                 <div class="bg-white p-4 rounded-lg shadow-sm border border-stone-200">
                    <button class="accordion-toggle flex justify-between items-center w-full text-left text-xl font-semibold">
                        <span>üßò‚Äç‚ôÄÔ∏è Post-Piernas (Piernas, Gl√∫teos)</span>
                        <span class="transform transition-transform duration-300">‚ñº</span>
                    </button>
                    <div class="accordion-content pt-2">
                        <ul class="list-disc list-inside space-y-3 text-stone-700">
                           <li><strong>Zancada de Corredor (Anjaneyasana):</strong> Desde una posici√≥n de zancada baja, apoya la rodilla trasera en el suelo. Mant√©n las manos en el suelo o en la rodilla delantera para estirar el flexor de la cadera y el cu√°driceps. Mant√©n 30 seg por lado.</li>
                           <li><strong>Postura del Ojo de la Aguja (Sucirandhrasana):</strong> Acostado, cruza un tobillo sobre la rodilla opuesta. Sujeta el muslo de la pierna de abajo y tira suavemente hacia ti para estirar el gl√∫teo y el piriforme. Mant√©n 30-60 seg por lado.</li>
                           <li><strong>Piernas Arriba de la Pared (Viparita Karani):</strong> Si√©ntate de lado contra una pared y luego gira para acostarte y extender las piernas hacia arriba por la pared. Es una postura de recuperaci√≥n pasiva excelente para la circulaci√≥n. Mant√©n 3-5 minutos.</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para la Gu√≠a de Ejercicios -->
    <div id="guide-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h2 id="guide-title" class="text-2xl font-bold"></h2>
                <button id="close-guide-btn" class="text-2xl font-bold">&times;</button>
            </div>
            <div id="guide-content" class="prose max-w-none"></div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const routines = {
        TORSO_PUSH: {
            title: 'üí™ Torso Empuje y Mu√±ecas',
            hasGuide: false, // For now, will need new guides
            description: 'Fuerza de pecho, hombros, tr√≠ceps y salud de mu√±ecas.',
            details: {
                exercises: [
                    { name: 'Press de Banca con Mancuernas', series: 4, reps: '8-12', rest: '60 seg', notes: 'Fuerza base de pecho' },
                    { name: 'Press de Hombros (con barra de pilates)', series: 4, reps: '12-15', rest: '60 seg', notes: 'Pisa la banda para resistencia' },
                    { name: 'Aperturas con Ligas', series: 3, reps: '15-20', rest: '45 seg', notes: 'Aislar y estirar pecho' },
                    { name: 'Elevaciones Laterales con Mancuernas', series: 3, reps: '15-20', rest: '45 seg', notes: 'Amplitud de hombros' },
                    { name: 'Pushdowns de Tr√≠ceps con Liga', series: 3, reps: '15-20', rest: '45 seg', notes: 'Aislar tr√≠ceps' },
                    { name: 'Extensi√≥n de Mu√±eca (Palmas abajo)', series: 3, reps: '15-20', rest: '30 seg', notes: 'Salud articular, con barra de pilates' }
                ]
            }
        },
        LEGS_ANKLES: {
            title: 'ü¶µ Pierna y Tobillos',
            hasGuide: true, // The LEGS guide is still relevant
            description: 'Fuerza de piernas, gl√∫teos y estabilidad de tobillos.',
            details: {
                exercises: [
                    { name: 'Sentadilla con Barra de Pilates', series: 4, reps: '12-15', rest: '60 seg', notes: 'Pisa la banda, barra en espalda' },
                    { name: 'Peso Muerto Rumano con Mancuernas', series: 3, reps: '12-15', rest: '75 seg', notes: 'Foco en isquiotibiales' },
                    { name: 'Zancada Est√°tica (Foco Tobillo)', series: 3, reps: '10-12 c/lado', rest: '60 seg', notes: 'Controla la estabilidad del tobillo' },
                    { name: 'Puente de Gl√∫teos con Banda', series: 3, reps: '15-20', rest: '45 seg', notes: 'Banda en las rodillas, empuja hacia afuera' },
                    { name: 'Elevaci√≥n de Talones (Foco Tobillo)', series: 4, reps: '20-25', rest: '45 seg', notes: 'Con barra de pilates para resistencia' }
                ]
            }
        },
        TORSO_PULL: {
            title: 'üèãÔ∏è‚Äç‚ôÇÔ∏è Torso Tracci√≥n y Mu√±ecas',
            hasGuide: false,
            description: 'Fuerza de espalda, b√≠ceps y salud de mu√±ecas.',
            details: {
                exercises: [
                    { name: 'Jal√≥n al Pecho con Barra de Pilates', series: 4, reps: '12-15', rest: '60 seg', notes: 'Anclaje alto en puerta' },
                    { name: 'Remo Inclinado con Mancuernas', series: 4, reps: '8-12', rest: '60 seg', notes: 'Fuerza y densidad de espalda' },
                    { name: 'Face Pulls con Liga', series: 3, reps: '15-20', rest: '45 seg', notes: 'Salud del hombro y postura' },
                    { name: 'Curl de B√≠ceps con Barra de Pilates', series: 3, reps: '12-15', rest: '45 seg', notes: 'Pisa la banda para resistencia' },
                    { name: 'Flexi√≥n de Mu√±eca (Palmas arriba)', series: 3, reps: '15-20', rest: '30 seg', notes: 'Salud articular, con barra de pilates' }
                ]
            }
        },
        GLUTES_CORE: {
            title: 'üçë Gl√∫teos y Core',
            hasGuide: false,
            description: 'Fortalecimiento de la cadena posterior y el abdomen.',
            details: {
                exercises: [
                    { name: 'Jal√≥n entre Piernas (Pull Through)', series: 4, reps: '15-20', rest: '60 seg', notes: 'Anclaje bajo, foco en gl√∫teos' },
                    { name: 'Caminata Lateral con Banda', series: 3, reps: '12 pasos c/lado', rest: '45 seg', notes: 'Banda en rodillas o tobillos' },
                    { name: 'Giros Rusos con Barra de Pilates', series: 3, reps: '20 giros', rest: '45 seg', notes: 'Sost√©n la barra, gira el torso' },
                    { name: 'Plancha', series: 3, reps: '45-75 seg', rest: '60 seg', notes: 'Mant√©n el cuerpo recto' },
                    { name: 'P√°jaro-Perro (Bird-Dog)', series: 3, reps: '12 (c/lado)', rest: '30 seg', notes: 'Movimiento lento y controlado' }
                ]
            }
        },
        METABOLIC: {
            title: '‚ö° Circuito Metab√≥lico',
            hasGuide: false,
            description: 'Quema de grasa y resistencia cardiovascular. Realizar como un circuito.',
            details: {
                exercises: [
                    { name: 'Thrusters con Barra de Pilates', series: '4 Rondas', reps: '15', rest: '15 seg', notes: 'Sentadilla + Press de hombros' },
                    { name: 'Remo R√°pido con Liga', series: '4 Rondas', reps: '20', rest: '15 seg', notes: 'Ritmo r√°pido y constante' },
                    { name: 'Zancada con Giro', series: '4 Rondas', reps: '10 c/lado', rest: '15 seg', notes: 'Con barra de pilates' },
                    { name: 'Jumping Jacks', series: '4 Rondas', reps: '45 seg', rest: '90 seg', notes: 'Descanso largo al final de la ronda' }
                ]
            }
        },
        YOGA_REST: { title: 'üßò‚Äç‚ôÇÔ∏è Descanso Activo', description: 'D√≠a de recuperaci√≥n con Yoga y movilidad. Revisa la pesta√±a de Yoga.' },
        REST: { title: 'üò¥ Descanso Completo', description: 'Recuperaci√≥n y Crecimiento. ¬°Escucha a tu cuerpo!' }
    };

    const guides = {
        LEGS: {
            title: 'Gu√≠a Visual de Pierna y Core',
            content: `
                <div class="space-y-8">
                    <!-- Sentadillas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>1. Sentadillas (Squats)</h3><p><strong>Descripci√≥n:</strong> Ejercicio fundamental para fortalecer piernas y gl√∫teos.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>Pies al ancho de hombros, pecho erguido.</li><li>Baja las caderas hacia atr√°s y abajo, manteniendo espalda recta.</li><li>Baja hasta que los muslos est√©n paralelos al suelo.</li><li>Sube empujando desde los talones.</li></ul><a href="https://www.youtube.com/watch?v=l7_B-mI4G6I" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/sentadillas.png" alt="Imagen de Sentadilla" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- Peso Muerto Rumano -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>2. Peso Muerto Rumano (RDL)</h3><p><strong>Descripci√≥n:</strong> Excelente para isquiotibiales, gl√∫teos y la cadena posterior.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>Ligera flexi√≥n de rodillas (no bloqueadas), espalda recta.</li><li>Inicia empujando las caderas hacia atr√°s.</li><li>Baja la carga cerca de las piernas hasta sentir un estiramiento.</li><li>Sube extendiendo las caderas.</li></ul><a href="https://www.youtube.com/watch?v=JCX0s_23b3A" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/pesomuertorumano.png" alt="Imagen de Peso Muerto Rumano" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- Zancadas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>3. Zancadas (Lunges)</h3><p><strong>Descripci√≥n:</strong> Ejercicio unilateral que trabaja cu√°driceps, isquiotibiales y gl√∫teos.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>Da un paso largo hacia adelante.</li><li>Baja las caderas hasta que ambas rodillas formen un √°ngulo de 90 grados.</li><li>La rodilla delantera alineada con el tobillo.</li><li>Empuja con el tal√≥n delantero para volver.</li></ul><a href="https://www.youtube.com/watch?v=zGq_T-gYQ9A" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/zancadas.png" alt="Imagen de Zancada" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- Puente de Gl√∫teos -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>4. Puente de Gl√∫teos</h3><p><strong>Descripci√≥n:</strong> Activa y fortalece gl√∫teos e isquiotibiales con bajo impacto.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>Acu√©state boca arriba, rodillas flexionadas.</li><li>Levanta las caderas formando una l√≠nea recta de hombros a rodillas.</li><li>Aprieta los gl√∫teos en la cima.</li></ul><a href="https://www.youtube.com/watch?v=8bbE64NuDTU" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/puente de gluteos.png" alt="Imagen de Puente de Gl√∫teos" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- Elevaci√≥n de Gemelos -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>5. Elevaci√≥n de Gemelos</h3><p><strong>Descripci√≥n:</strong> Se enfoca en los m√∫sculos de la pantorrilla.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>De pie, con o sin una superficie elevada.</li><li>Levanta los talones tan alto como puedas.</li><li>Baja lentamente para un estiramiento completo.</li></ul><a href="https://www.youtube.com/watch?v=3u_j7g-p4w4" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/Elevaci√≥n de Gemelos con Mancuernas.png" alt="Imagen de Elevaci√≥n de Gemelos" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- Plancha -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>6. Plancha sobre Antebrazos</h3><p><strong>Descripci√≥n:</strong> Fortalece el core en su totalidad.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>Ap√≥yate sobre antebrazos y puntas de los pies.</li><li>Cuerpo en l√≠nea recta de cabeza a talones.</li><li>Mant√©n el abdomen contra√≠do.</li></ul><a href="https://www.youtube.com/watch?v=E_A3j3A-H7k" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/Plancha.png" alt="Imagen de Plancha" class="rounded-lg shadow-lg w-full"></div></div><hr>
                    <!-- P√°jaro-Perro -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center"><div class="prose"><h3>7. P√°jaro-Perro (Bird-Dog)</h3><p><strong>Descripci√≥n:</strong> Mejora la estabilidad del core y la coordinaci√≥n.</p><h5>T√©cnica:</h5><ul class="list-disc list-inside text-sm"><li>A cuatro patas, espalda recta.</li><li>Extiende un brazo hacia adelante y la pierna opuesta hacia atr√°s.</li><li>Mant√©n el equilibrio y regresa controladamente.</li></ul><a href="https://www.youtube.com/watch?v=2b_j_Yq-3Qc" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a></div><div><img src="imagenes/P√°jaro-Perro.png" alt="Imagen de P√°jaro-Perro" class="rounded-lg shadow-lg w-full"></div></div>
                </div>
            `
        },
        PUSH: {
            title: 'Gu√≠a Visual de Torso (Empuje)',
            content: `
                <div class="space-y-8">
                    <!-- Press de Banca con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>1. Press de Banca con Mancuernas (Dumbbell Bench Press)</h3>
                            <p><strong>Descripci√≥n:</strong> Es el ejercicio fundamental para construir fuerza y tama√±o en el pecho (pectorales). Tambi√©n trabaja los hombros (deltoides frontales) y los tr√≠ceps.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Acu√©state en un banco plano con una mancuerna en cada mano, apoyadas sobre tus muslos.</li>
                                <li>Usa tus rodillas para ayudarte a "patear" las mancuernas hacia arriba, una a la vez, y col√≥calas a los lados de tu pecho. Tus palmas deben mirar hacia adelante.</li>
                                <li>Contrae el abdomen y apoya firmemente los pies en el suelo.</li>
                                <li>Empuja las mancuernas hacia arriba en un movimiento de arco ligero, hasta que est√©n casi juntas sobre tu pecho.</li>
                                <li>Baja las mancuernas de forma controlada hasta que est√©n a los lados de tu pecho, sintiendo un estiramiento.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=999-y4p2iS4" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Press de Hombro Sentado con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>2. Press de Hombro Sentado con Mancuernas (Seated Dumbbell Shoulder Press)</h3>
                            <p><strong>Descripci√≥n:</strong> Este ejercicio se enfoca en los deltoides (m√∫sculos del hombro), especialmente la parte frontal y media, adem√°s de involucrar los tr√≠ceps.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Si√©ntate en un banco con respaldo vertical (o a 90 grados).</li>
                                <li>Sost√©n las mancuernas a la altura de los hombros, con las palmas mirando hacia adelante.</li>
                                <li>Mant√©n el pecho erguido y el abdomen contra√≠do.</li>
                                <li>Empuja las mancuernas hacia arriba hasta que tus brazos est√©n completamente extendidos sobre tu cabeza (sin bloquear los codos).</li>
                                <li>Baja lentamente a la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=8Aiw_o0aE1g" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Press Inclinado con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>3. Press Inclinado con Mancuernas (Incline Dumbbell Press)</h3>
                            <p><strong>Descripci√≥n:</strong> Realizado en un banco inclinado (30-45 grados), este ejercicio pone un mayor √©nfasis en la parte superior del pecho (la "cabeza clavicular" del pectoral).</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ajusta el banco a una inclinaci√≥n de 30-45 grados.</li>
                                <li>Realiza el mismo movimiento que el Press de Banca plano.</li>
                                <li>Baja las mancuernas a la parte superior de tu pecho y empuja hacia arriba y ligeramente hacia atr√°s, siguiendo la l√≠nea del banco.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=Z0bRiX_L6uA" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Flexiones Inclinadas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>4. Flexiones Inclinadas (Incline Push-Ups)</h3>
                            <p><strong>Descripci√≥n:</strong> Una variaci√≥n de la flexi√≥n est√°ndar donde las manos se colocan en una superficie elevada (banco, silla, mesa). Esto reduce la cantidad de peso corporal que levantas y enfoca el trabajo en la parte inferior del pecho.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Coloca las manos sobre un banco o superficie estable, un poco m√°s anchas que los hombros.</li>
                                <li>Forma una l√≠nea recta desde la cabeza hasta los talones. Contrae el abdomen y los gl√∫teos.</li>
                                <li>Baja el pecho hacia el banco, manteniendo los codos relativamente cerca del cuerpo.</li>
                                <li>Empuja hacia arriba para volver a la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=Z0bRiX_L6uA" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Aperturas con Ligas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>5. Aperturas con Ligas (Band Chest Flys)</h3>
                            <p><strong>Descripci√≥n:</strong> Un ejercicio de aislamiento excelente para el pecho. La liga proporciona tensi√≥n constante, lo que es genial para la conexi√≥n mente-m√∫sculo.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ancla la liga a un punto fijo detr√°s de ti, a la altura del pecho.</li>
                                <li>Sujeta las asas y da un paso adelante para crear tensi√≥n. Mant√©n una ligera flexi√≥n en los codos (como si abrazaras un √°rbol grande).</li>
                                <li>Junta las manos frente a tu pecho, apretando los pectorales fuertemente.</li>
                                <li>Regresa lentamente a la posici√≥n inicial, controlando la tensi√≥n de la liga.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=Z0bRiX_L6uA" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Elevaciones Laterales -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>6. Elevaciones Laterales (Lateral Raises)</h3>
                            <p><strong>Descripci√≥n:</strong> El ejercicio de aislamiento clave para los deltoides laterales (la parte media del hombro), que da la apariencia de "anchura" a los hombros.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ponte de pie con una mancuerna ligera en cada mano, a los lados de tu cuerpo.</li>
                                <li>Mant√©n el pecho erguido y una ligera flexi√≥n en los codos.</li>
                                <li>Levanta los brazos rectos hacia los lados hasta que est√©n paralelos al suelo (a la altura de los hombros).</li>
                                <li>Baja lentamente y con control.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=34B2-kI_L-M" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Pushdowns de Tr√≠ceps con Liga -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>7. Pushdowns de Tr√≠ceps con Liga (Band Triceps Pushdowns)</h3>
                            <p><strong>Descripci√≥n:</strong> Un ejercicio de aislamiento muy efectivo para los tr√≠ceps.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ancla una liga en un punto alto (como el marco de una puerta).</li>
                                <li>Sujeta la liga con ambas manos y mant√©n los codos "pegados" a los costados de tu torso.</li>
                                <li>Empuja la liga hacia abajo hasta que tus brazos est√©n completamente extendidos, apretando los tr√≠ceps.</li>
                                <li>Regresa lentamente a la posici√≥n inicial, sin mover los codos de su sitio.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=999-y4p2iS4" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Flexiones (Push-Ups) -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>8. Flexiones (Push-Ups)</h3>
                            <p><strong>Descripci√≥n:</strong> El ejercicio de peso corporal por excelencia. Trabaja el pecho, los hombros, los tr√≠ceps y el core de manera integrada.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Col√≥cate en posici√≥n de plancha alta, con las manos un poco m√°s anchas que los hombros.</li>
                                <li>Forma una l√≠nea recta desde la cabeza hasta los talones.</li>
                                <li>Baja el cuerpo de forma controlada hasta que tu pecho est√© cerca del suelo.</li>
                                <li>Empuja con fuerza para volver a la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=P_Vui-hG3aI" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                </div>
            `
        },
        PULL: {
            title: 'Gu√≠a Visual de Torso (Tir√≥n)',
            content: `
                <div class="space-y-8">
                    <!-- Remo Inclinado con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>1. Remo Inclinado con Mancuernas (Bent-Over Dumbbell Row)</h3>
                            <p><strong>Descripci√≥n:</strong> Un ejercicio fundamental para desarrollar una espalda fuerte y densa. Trabaja principalmente los dorsales, romboides, trapecios y la parte posterior de los hombros.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ponte de pie con una mancuerna en cada mano, con los pies separados al ancho de los hombros.</li>
                                <li>Mant√©n una ligera flexi√≥n en las rodillas e inclina tu torso hacia adelante desde las caderas, hasta que quede casi paralelo al suelo. Mant√©n la espalda completamente recta.</li>
                                <li>Deja que las mancuernas cuelguen directamente debajo de tus hombros con los brazos extendidos.</li>
                                <li>Jala las mancuernas hacia tu torso, llevando los codos hacia el techo y apretando los om√≥platos.</li>
                                <li>Baja las mancuernas de forma controlada a la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Dominadas Asistidas / Negativas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>2. Dominadas Asistidas / Negativas (Assisted / Negative Pull-Ups)</h3>
                            <p><strong>Descripci√≥n:</strong> Las dominadas son el rey de los ejercicios para la espalda superior. Esta variaci√≥n te ayuda a construir la fuerza necesaria para hacerlas sin ayuda. Las negativas se enfocan en la fase de descenso del movimiento.</p>
                            <h5>T√©cnica (Negativas):</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Coloca un banco o una silla debajo de una barra de dominadas.</li>
                                <li>S√∫bete al banco y agarra la barra con las manos un poco m√°s anchas que los hombros.</li>
                                <li>Salta para llevar tu barbilla por encima de la barra (la posici√≥n final de una dominada).</li>
                                <li>Quita los pies del banco y baja tu cuerpo de la forma m√°s lenta y controlada posible. El objetivo es que el descenso dure entre 3 y 5 segundos.</li>
                                <li>Una vez abajo, vuelve a subirte al banco y repite.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Remo a una mano con Mancuerna -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>3. Remo a una mano con Mancuerna (Single-Arm Dumbbell Row)</h3>
                            <p><strong>Descripci√≥n:</strong> Este ejercicio unilateral es excelente para aislar los dorsales de cada lado, corregir desequilibrios de fuerza y mejorar la estabilidad del core.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Coloca una rodilla y la mano del mismo lado sobre un banco plano. Tu espalda debe estar paralela al suelo.</li>
                                <li>Con la otra mano, agarra una mancuerna del suelo, manteniendo el brazo extendido.</li>
                                <li>Jala la mancuerna hacia arriba, a un costado de tu pecho, manteniendo el codo cerca del cuerpo.</li>
                                <li>Conc√©ntrate en apretar el m√∫sculo de la espalda en la parte superior del movimiento.</li>
                                <li>Baja la mancuerna lentamente a la posici√≥n inicial. Completa todas las repeticiones de un lado antes de cambiar al otro.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Remo con Ligas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>4. Remo con Ligas (Band Rows)</h3>
                            <p><strong>Descripci√≥n:</strong> Una alternativa fant√°stica a las pesas que proporciona tensi√≥n constante en los m√∫sculos de la espalda. Ideal para hacer en casa.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Si√©ntate en el suelo con las piernas extendidas. Pasa una liga de resistencia por la planta de tus pies.</li>
                                <li>Sujeta los extremos de la liga con ambas manos, manteniendo la espalda recta y el pecho erguido.</li>
                                <li>Jala la liga hacia tu abdomen, llevando los codos hacia atr√°s y apretando los om√≥platos.</li>
                                <li>Haz una pausa de un segundo en la posici√≥n de m√°xima contracci√≥n.</li>
                                <li>Regresa lentamente a la posici√≥n inicial, controlando la tensi√≥n de la liga.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Face Pulls con Liga de Resistencia -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>5. Face Pulls con Liga de Resistencia (Resistance Band Face Pulls)</h3>
                            <p><strong>Descripci√≥n:</strong> Un ejercicio crucial para la salud de los hombros y la postura. Fortalece los deltoides posteriores y los m√∫sculos de la espalda alta que suelen estar debilitados.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ancla una liga de resistencia a la altura de tu cara o un poco m√°s arriba (en el marco de una puerta, por ejemplo).</li>
                                <li>Sujeta la liga con ambas manos, con las palmas hacia abajo, y da un paso atr√°s para crear tensi√≥n.</li>
                                <li>Jala la liga directamente hacia tu cara, apuntando a la altura de tus ojos.</li>
                                <li>A medida que jalas, rota externamente tus hombros, llevando los nudillos hacia atr√°s y los codos hacia los lados y arriba.</li>
                                <li>Aprieta la parte superior de tu espalda y regresa de forma controlada.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Curl de B√≠ceps con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>6. Curl de B√≠ceps con Mancuernas (Dumbbell Bicep Curl)</h3>
                            <p><strong>Descripci√≥n:</strong> El ejercicio cl√°sico para construir el "pico" del b√≠ceps.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ponte de pie, sosteniendo una mancuerna en cada mano con un agarre supino (palmas hacia adelante).</li>
                                <li>Mant√©n los codos pegados a los costados de tu torso.</li>
                                <li>Sin mover la parte superior de los brazos, flexiona los codos y lleva las mancuernas hacia tus hombros.</li>
                                <li>Aprieta los b√≠ceps en la parte superior del movimiento.</li>
                                <li>Baja las mancuernas lentamente y con control hasta la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Curl de B√≠ceps con Ligas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>7. Curl de B√≠ceps con Ligas (Band Bicep Curl)</h3>
                            <p><strong>Descripci√≥n:</strong> Una gran variaci√≥n que mantiene la tensi√≥n en el b√≠ceps durante todo el rango de movimiento, especialmente en la parte superior.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Pisa el centro de una liga de resistencia con ambos pies.</li>
                                <li>Sujeta los extremos de la liga con un agarre supino (palmas hacia arriba).</li>
                                <li>Manteniendo los codos fijos a los costados, flexiona los brazos y lleva las manos hacia los hombros.</li>
                                <li>Aprieta los b√≠ceps en la contracci√≥n m√°xima.</li>
                                <li>Baja lentamente, resistiendo la tensi√≥n de la liga.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                    <hr>
                    <!-- Curl Martillo con Mancuernas -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                        <div class="prose">
                            <h3>8. Curl Martillo con Mancuernas (Dumbbell Hammer Curl)</h3>
                            <p><strong>Descripci√≥n:</strong> Esta variaci√≥n del curl se realiza con un agarre neutro (como si sostuvieras un martillo). Trabaja el b√≠ceps, el braquial (un m√∫sculo debajo del b√≠ceps que ayuda a dar grosor al brazo) y el antebrazo.</p>
                            <h5>T√©cnica:</h5>
                            <ul class="list-disc list-inside text-sm">
                                <li>Ponte de pie con una mancuerna en cada mano y las palmas enfrentadas (agarre neutro).</li>
                                <li>Mant√©n los codos pegados a los costados.</li>
                                <li>Flexiona los codos y levanta las mancuernas hacia los hombros, manteniendo el agarre neutro durante todo el movimiento.</li>
                                <li>Baja de forma controlada a la posici√≥n inicial.</li>
                            </ul>
                            <a href="https://www.youtube.com/watch?v=your_video_id" target="_blank" class="text-blue-600 hover:underline mt-2 inline-block">Ver video en YouTube</a>
                        </div>
                        <div class="img-placeholder"><span>Espacio para tu imagen</span></div>
                    </div>
                </div>
            `
        }
    };
    
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth();
    const day = today.getDate();
    const dateKey = `${year}-${month + 1}-${day}`;

    const schedulePattern = ['TORSO_PUSH', 'LEGS_ANKLES', 'YOGA_REST', 'TORSO_PULL', 'GLUTES_CORE', 'METABOLIC', 'REST'];
    const monthlySchedule = {};
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    for (let d = 1; d <= daysInMonth; d++) {
        const date = new Date(year, month, d);
        const dayOfWeek = date.getDay(); // 0 for Sunday, 1 for Monday...
        const patternIndex = (dayOfWeek === 0) ? 6 : dayOfWeek - 1; // Adjust to make Monday the start of the week
        monthlySchedule[d] = schedulePattern[patternIndex];
    }
    
    const tabs = document.querySelectorAll('.nav-tab');
    const contentSections = document.querySelectorAll('.content-section');
    const routineSelectors = document.querySelectorAll('.routine-selector');
    const routineDetailsContainer = document.getElementById('routine-details-container');
    const hoyContainer = document.getElementById('hoy');
    const calendarBody = document.getElementById('calendar-body');
    const calendarTitle = document.getElementById('calendar-title');
    const mainContent = document.getElementById('main-content');

    function createRoutineHTML(routineKey, isTodayView) {
        const routineData = routines[routineKey];
        if (!routineData || !routineData.details) return ''; // Return empty for REST days
        
        let progressHTML = '';
        if (isTodayView) {
            progressHTML = `
                <div class="mb-6">
                    <h3 class="text-center font-bold text-xl mb-3">Progreso Diario</h3>
                    <div id="progress-text" class="text-center font-bold text-lg mb-2 text-[#5a6e5f]">0%</div>
                    <div class="progress-bar-container" style="height: 1rem;">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                </div>
            `;
        }

        let guideButtonHTML = '';
        if (routineData.hasGuide) {
            let guideType = 'LEGS'; // Hardcoded for now as it's the only guide
            guideButtonHTML = `<div class="text-center my-4"><button data-guide="${guideType}" class="show-guide-btn bg-[#c5a265] text-white font-bold py-2 px-4 rounded-lg hover:bg-[#b38e52] transition-colors">Ver Gu√≠a Visual de Ejercicios</button></div>`;
        }

        let header = `<div class="bg-white p-4 sm:p-6 rounded-lg shadow-md border border-stone-200">
                        ${progressHTML}
                        <h2 class="text-2xl font-bold mb-1 text-center">${routineData.title}</h2>
                        <p class="text-center text-stone-500 mb-2">${routineData.description}</p>
                        ${guideButtonHTML}`;

        let tableHeader = `
            <div class="overflow-x-auto">
                <table class="w-full text-left">
                    <thead class="bg-stone-50">
                        <tr>
                            <th class="p-3 font-semibold text-sm">Ejercicio</th>
                            <th class="p-3 font-semibold text-sm text-center">Series</th>
                            <th class="p-3 font-semibold text-sm text-center">Reps</th>
                            <th class="p-3 font-semibold text-sm text-center">Descanso</th>
                            <th class="p-3 font-semibold text-sm">Notas</th>
                            ${isTodayView ? '<th class="p-3 font-semibold text-sm text-center">Hecho</th>' : ''}
                        </tr>
                    </thead>
                    <tbody>`;
        
        let tableRows = routineData.details.exercises.map((ex, index) => `
            <tr class="border-b border-stone-200 last:border-b-0">
                <td class="p-3 font-medium">${ex.name}</td>
                <td class="p-3 text-center">${ex.series}</td>
                <td class="p-3 text-center">${ex.reps}</td>
                <td class="p-3 text-center">${ex.rest}</td>
                <td class="p-3 text-sm text-stone-600">${ex.notes || ''}</td>
                ${isTodayView ? `<td class="p-3 text-center"><input type="checkbox" data-exercise-index="${index}" class="h-5 w-5 rounded text-[#c5a265] focus:ring-[#b38e52]"></td>` : ''}
            </tr>
        `).join('');
        
        let tableFooter = `</tbody></table></div>`;
        let commonSections = `
            <div class="mt-6 p-4 bg-[#5a6e5f]/10 text-[#2c3144] rounded-lg">
                <h4 class="font-bold">‚ñ∂Ô∏è Calentamiento (10 min antes)</h4>
                <p class="text-sm">Movilidad articular (mu√±ecas, tobillos, caderas), 5 min de cardio ligero (Jumping Jacks, trote en el sitio), Sentadillas sin peso, Gato-Vaca.</p>
            </div>
            <div class="mt-4 p-4 bg-[#6d7b8d]/10 text-[#2c3144] rounded-lg">
                <h4 class="font-bold">‚è∏Ô∏è Enfriamiento (10 min despu√©s)</h4>
                <p class="text-sm">Estiramientos suaves de los m√∫sculos trabajados. Revisa la pesta√±a de Yoga para ideas espec√≠ficas seg√∫n la rutina.</p>
            </div>
        `;
        
        return header + tableHeader + tableRows + tableFooter + commonSections + `</div>`;
    }

    function displayTodaysPlan() {
        const activityKey = monthlySchedule[day];
        const activity = routines[activityKey];
        const todayName = today.toLocaleDateString('es-ES', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

        let content = '';
        if (activity.details) { // Check if it's a workout day
            content = `<div class="text-center mb-6">
                           <h2 class="text-3xl font-bold">Plan para Hoy</h2>
                           <p class="text-stone-500">${todayName}</p>
                       </div>
                       ${createRoutineHTML(activityKey, true)}`;
        } else { // It's a REST or YOGA_REST day
             content = `<div class="bg-white p-6 rounded-lg shadow-md border border-stone-200 text-center">
                           <h2 class="text-3xl font-bold">Plan para Hoy</h2>
                           <p class="text-stone-500 mb-4">${todayName}</p>
                           <p class="text-2xl mt-4 text-[#5a6e5f]">${activity.title}</p>
                           <p class="mt-2 text-stone-600">${activity.description}</p>
                       </div>`;
        }
        hoyContainer.innerHTML = content;
        loadProgress();
        updateProgress();
    }

    function updateProgress() {
        const checkboxes = document.querySelectorAll('#hoy input[type="checkbox"]');
        const total = checkboxes.length;
        if (total === 0) return;

        const checked = Array.from(checkboxes).filter(cb => cb.checked).length;
        const percentage = total > 0 ? Math.round((checked / total) * 100) : 0;
        
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        if (progressBar) progressBar.style.width = `${percentage}%`;
        if (progressText) progressText.textContent = `${percentage}% Completado`;
    }

    function saveProgress() {
        const checkboxes = document.querySelectorAll('#hoy input[type="checkbox"]');
        const progress = Array.from(checkboxes).map(cb => cb.checked);
        localStorage.setItem(dateKey, JSON.stringify(progress));
    }

    function loadProgress() {
        const savedProgress = JSON.parse(localStorage.getItem(dateKey));
        if (savedProgress) {
            const checkboxes = document.querySelectorAll('#hoy input[type="checkbox"]');
            checkboxes.forEach((cb, index) => {
                if (savedProgress[index]) {
                    cb.checked = true;
                }
            });
        }
    }

    function updateGlobalProgress() {
        let totalExercisesInMonth = 0;
        let completedExercisesInMonth = 0;

        for (let d = 1; d <= daysInMonth; d++) {
            const routineKey = monthlySchedule[d];
            if (routines[routineKey] && routines[routineKey].details) {
                totalExercisesInMonth += routines[routineKey].details.exercises.length;
                
                const progressKey = `${year}-${month + 1}-${d}`;
                const savedProgress = JSON.parse(localStorage.getItem(progressKey));
                if (savedProgress) {
                    completedExercisesInMonth += savedProgress.filter(Boolean).length;
                }
            }
        }

        const globalPercentage = totalExercisesInMonth > 0 ? Math.round((completedExercisesInMonth / totalExercisesInMonth) * 100) : 0;
        
        const globalProgressBar = document.getElementById('global-progress-bar');
        const globalProgressText = document.getElementById('global-progress-text');

        if (globalProgressBar) globalProgressBar.style.width = `${globalPercentage}%`;
        if (globalProgressText) globalProgressText.textContent = `${globalPercentage}% Completado`;
    }

    function generateCalendar() {
        calendarTitle.textContent = `Plan de ${today.toLocaleDateString('es-ES', { month: 'long' })} ${year}`;
        const firstDayOfMonth = new Date(year, month, 1).getDay();
        const offset = (firstDayOfMonth === 0) ? 6 : firstDayOfMonth - 1;

        calendarBody.innerHTML = '';
        for (let i = 0; i < offset; i++) {
            calendarBody.innerHTML += `<div class="bg-stone-50 rounded-md"></div>`;
        }

        for (let d = 1; d <= daysInMonth; d++) {
            const activityKey = monthlySchedule[d];
            const activity = routines[activityKey];
            const isToday = d === day;
            const todayClass = isToday ? 'today' : '';

            let dayCell = `
                <div class="calendar-day bg-white p-2 rounded-md border border-stone-200 flex flex-col ${todayClass}">
                    <div class="font-bold text-sm">${d}</div>
                    <div class="text-xs mt-1 flex-grow">
                        <p class="font-semibold text-[#2c3144]">${activity.title}</p>
                        <p class="text-stone-500 hidden sm:block">${activity.description}</p>
                    </div>
                </div>`;
            calendarBody.innerHTML += dayCell;
        }
    }

    function switchTab(tabName) {
        contentSections.forEach(section => section.classList.remove('active'));
        document.getElementById(tabName).classList.add('active');

        tabs.forEach(tab => {
            tab.classList.remove('tab-active');
            if (tab.dataset.tab === tabName) {
                tab.classList.add('tab-active');
            }
        });
    }

    function initModal() {
        const modal = document.getElementById('guide-modal');
        const guideTitle = document.getElementById('guide-title');
        const guideContent = document.getElementById('guide-content');
        const closeBtn = document.getElementById('close-guide-btn');
        
        mainContent.addEventListener('click', (e) => {
            if (e.target.classList.contains('show-guide-btn')) {
                const guideKey = e.target.dataset.guide;
                const guideData = guides[guideKey];
                if(guideData) {
                    guideTitle.textContent = guideData.title;
                    guideContent.innerHTML = guideData.content;
                    modal.classList.remove('hidden');
                }
            }
        });

        closeBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) { // Clicked on the overlay
                modal.classList.add('hidden');
            }
        });
    }

    tabs.forEach(tab => tab.addEventListener('click', () => switchTab(tab.dataset.tab)));

    // Need to re-query selectors after potential DOM changes
    document.getElementById('rutinas').addEventListener('click', (e) => {
        if (e.target.classList.contains('routine-selector')) {
            const routineKey = e.target.dataset.routine;
            routineDetailsContainer.innerHTML = createRoutineHTML(routineKey, false);
            if (window.innerWidth < 640) {
                routineDetailsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
    });
    
    document.querySelectorAll('.accordion-toggle').forEach(button => {
        button.addEventListener('click', () => {
            const content = button.nextElementSibling;
            const icon = button.querySelector('span:last-child');
            if (content.style.maxHeight) {
                content.style.maxHeight = null;
                icon.style.transform = 'rotate(0deg)';
            } else {
                document.querySelectorAll('.accordion-content').forEach(el => {
                    el.style.maxHeight = null;
                    if (el.previousElementSibling) {
                       el.previousElementSibling.querySelector('span:last-child').style.transform = 'rotate(0deg)';
                    }
                });
                content.style.maxHeight = content.scrollHeight + "px";
                icon.style.transform = 'rotate(180deg)';
            }
        });
    });
    
    hoyContainer.addEventListener('change', (e) => {
        if (e.target.matches('input[type="checkbox"]')) {
            saveProgress();
            updateProgress();
            updateGlobalProgress();
        }
    });

    // Initial Load
    displayTodaysPlan();
    generateCalendar();
    updateGlobalProgress();
    initModal();
    switchTab('hoy');
    // Set a default view for the routines tab
    routineDetailsContainer.innerHTML = createRoutineHTML('TORSO_PUSH', false);
});
</script>

</body>
</html>
